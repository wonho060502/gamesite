<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../Style/wl.css">
    <title>ê²Œì„ ë‹¤ìš´ë¡œë“œ ì„¼í„°</title>
    <!-- 1. Tailwind CSS CDN ë¡œë“œ (í•„ìˆ˜: HTMLì— ë‚¨ê²¨ì•¼ í•¨) -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- 2. Tailwind Custom Configuration (í•„ìˆ˜: HTMLì— ë‚¨ê²¨ì•¼ í•¨) -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'body-bg': '#10141c',      // ì£¼ ë°°ê²½ìƒ‰ (Dark Slate)
                        'card-bg': '#202632',      // ì¹´ë“œ ë°°ê²½ìƒ‰ (Darker Slate)
                        'accent': '#4f46e5',        // ì£¼ìš” ê°•ì¡°ìƒ‰ (Indigo-600)
                        'accent-hover': '#4338ca',  // ê°•ì¡°ìƒ‰ í˜¸ë²„ (Indigo-700)
                        'text-light': '#e5e7eb',    // ë°ì€ í…ìŠ¤íŠ¸
                        'text-muted': '#9ca3af',    // ë³´ì¡° í…ìŠ¤íŠ¸
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                }
            }
        }
    </script>
</head>
<body class="bg-body-bg text-text-light font-sans">
    
<header>
  <div class="logo"></div>
  <ul class="nav">
    <li><a href="/index.html">í™ˆ</a></li>
    <li>
      <a href="#news">ìƒˆì†Œì‹</a>
      <div class="dropdown"><a href="../notice/noti.html">ê³µì§€ì‚¬í•­</a></div>
    </li>
    <li>
      <a href="#community">ì»¤ë®¤ë‹ˆí‹°</a>
      <div class="dropdown">
        <a href="..//commuity/communityall.html">ì „ì²´</a>
        <a href="..//commuity/communityfree.html">ììœ </a>
      </div>
    </li>
    <li><a href="download.html">ë‹¤ìš´ë¡œë“œ</a></li>
    <li><a href="#about">ê²Œì„ ì†Œê°œ</a></li>
    <li><a href="#contact">ê³ ê°ì§€ì›</a></li>
  </ul>
  <div class="login-area" id="loginArea">

  </div>
</header>

    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10">

        <!-- í˜ì´ì§€ ë©”ì¸ ì œëª© -->
        <h1 class="text-3xl font-extrabold mb-8 border-b border-text-muted/30 pb-3">ê³µì‹ ë‹¤ìš´ë¡œë“œ</h1>

        <!-- 2. ë‹¤ìš´ë¡œë“œ ë©”ì¸ ì„¹ì…˜ (ê°€ì¥ ë„“ê²Œ í™•ì¥ë˜ì–´ ì‹œê°ì ìœ¼ë¡œ ê°•ì¡°) -->
        <section class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-12">
            
            <!-- 2-1. í™•ì¥ëœ ë‹¤ìš´ë¡œë“œ ì¹´ë“œ (Download Hero Card) --> 
            <div class="lg:col-span-2 p-8 download-hero rounded-xl shadow-2xl border border-accent/50 flex flex-col">
                <div class="flex items-center mb-4">
                    <!-- Icon for Download -->
                    <svg xmlns="http://www.w3.org/2000/svg" class="w-8 h-8 mr-3 text-accent" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
                    <h2 class="text-3xl font-bold text-accent">ê²Œì„ í´ë¼ì´ì–¸íŠ¸ ë‹¤ìš´ë¡œë“œ</h2>
                </div>
                
                <p class="text-text-light text-lg mb-6">
                    ìµœì‹  ë²„ì „ì˜ ê³ ì„±ëŠ¥ ê²Œì„ í´ë¼ì´ì–¸íŠ¸ë¥¼ ì¦‰ì‹œ ë‹¤ìš´ë¡œë“œí•˜ê³ , ê´‘í™œí•œ ê²Œì„ ì„¸ê³„ë¥¼ ê²½í—˜í•˜ì„¸ìš”.
                </p>

                <div class="bg-body-bg/70 p-4 rounded-lg flex justify-between items-center mb-6 border border-text-muted/20">
                    <div class="text-base sm:text-lg">
                        <p class="font-semibold text-text-light">í˜„ì¬ ë²„ì „: <span class="ml-2 font-mono text-green-400">1.0.4</span></p>
                        <p class="text-text-muted">ìµœì¢… ì—…ë°ì´íŠ¸: <span class="ml-2 font-mono text-text-muted">2025-02-05</span></p>
                    </div>
                    <div class="text-right text-base sm:text-lg">
                        <p class="font-semibold text-text-light">íŒŒì¼ í¬ê¸°: <span class="ml-2 font-mono text-text-light">78 GB</span></p>
                    </div>
                </div>
                
                <!-- ë‹¤ìš´ë¡œë“œ ë²„íŠ¼ ì˜ì—­ (JavaScriptë¡œ ë‚´ìš© ì‚½ì…) -->
                <div id="downloadArea" class="text-center mt-auto">
                    <!-- JavaScript content is rendered here on load -->
                </div>
            </div>

            <!-- 2-2. ì‹œìŠ¤í…œ ìš”êµ¬ì‚¬í•­ ì¹´ë“œ (System Requirements) -->
            <div class="p-6 bg-card-bg rounded-xl shadow-xl border border-text-muted/20">
                <h2 class="text-xl font-bold mb-4 text-text-light flex items-center">
                    <!-- Icon for Laptop/Requirements -->
                    <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 mr-2 text-accent" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="3" width="20" height="14" rx="2" ry="2"/><line x1="2" y1="18" x2="22" y2="18"/><line x1="6" y1="22" x2="18" y2="22"/><line x1="10" y1="22" x2="14" y2="22"/></svg>
                    ì‹œìŠ¤í…œ ìš”êµ¬ì‚¬í•­
                </h2>
                <div class="overflow-x-auto text-sm">
                    <table class="w-full text-left border-collapse">
                        <thead>
                            <tr class="text-accent border-b border-accent/50">
                                <th class="py-2 px-1 font-bold">í•­ëª©</th>
                                <th class="py-2 px-1 font-bold">ìµœì†Œ</th>
                                <th class="py-2 px-1 font-bold">ê¶Œì¥</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="border-b border-body-bg/50">
                                <td class="py-2 px-1">CPU</td>
                                <td class="py-2 px-1">i5-6600K</td>
                                <td class="py-2 px-1">i7-9700K</td>
                            </tr>
                            <tr class="border-b border-body-bg/50">
                                <td class="py-2 px-1">RAM</td>
                                <td class="py-2 px-1">16 GB</td>
                                <td class="py-2 px-1">32 GB</td>
                            </tr>
                            <tr>
                                <td class="py-2 px-1">GPU</td>
                                <td class="py-2 px-1">GTX 1060</td>
                                <td class="py-2 px-1">RTX 3070</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="mt-4 text-center">
                    <a href="#installation" class="text-accent text-sm font-medium hover:underline">ìƒì„¸ ì‚¬ì–‘ ì „ì²´ ë³´ê¸° &rarr;</a>
                </div>
            </div>

        </section>
        
        <!-- ë‹¤ìš´ë¡œë“œ ìƒíƒœ ë©”ì‹œì§€ (alert() ëŒ€ì²´) -->
        <div id="statusMessage" class="mt-4 text-center text-lg font-semibold h-6 mb-12"></div>


        <!-- 3. ë³´ì¡° ì •ë³´ ì„¹ì…˜ (Grid Below Main Download Card) -->
        <section class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-12">

            <!-- 3-1. íŒ¨ì¹˜ ë…¸íŠ¸ ì¹´ë“œ (Patch Notes) -->
            <div class="p-6 bg-card-bg rounded-xl shadow-xl border border-text-muted/20">
                <h2 class="text-xl font-bold mb-3 text-text-light flex items-center">
                    <!-- Icon for File/Patch -->
                    <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 mr-2 text-accent" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><line x1="10" y1="9" x2="8" y2="9"/></svg>
                    ì£¼ìš” íŒ¨ì¹˜ ê¸°ë¡
                </h2>
                <div class="space-y-3 mt-4 text-sm">
                    <article>
                        <p class="font-semibold text-accent/80">1.0.4 - ì„œë²„ ì•ˆì •í™” (ìµœì‹ )</p>
                        <p class="text-text-muted">ì„œë²„ ì•ˆì •ì„± í–¥ìƒ ë° í…ìŠ¤ì²˜ ë¡œë”© ì§€ì—° ìˆ˜ì •.</p>
                        <a href="#patchNotesDetail" class="text-accent text-xs hover:underline">ìì„¸íˆ ë³´ê¸°</a>
                    </article>
                    <article>
                        <p class="font-semibold text-text-light/80">1.0.3 - ì‹ ê·œ ì½˜í…ì¸  ì¶”ê°€</p>
                        <p class="text-text-muted">ì‹ ê·œ ì§€ì—­ 'í™©ê¸ˆì˜ ì‚¬ë§‰' ì˜¤í”ˆ ë° ë ˆë²¨ í™•ì¥.</p>
                    </article>
                </div>
            </div>

            <!-- 3-2. ì„¤ì¹˜ ë°©ë²• ìš”ì•½ (Installation Guide Summary) -->
            <div id="installation" class="p-6 bg-card-bg rounded-xl shadow-xl border border-text-muted/20">
                   <h2 class="text-xl font-bold mb-3 text-text-light flex items-center">
                    <!-- Icon for Wrench/Install -->
                    <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 mr-2 text-accent" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20V5H4a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h2.5"/><path d="M10 10l3 3m0-3l-3 3"/></svg>
                    ì„¤ì¹˜ ê°€ì´ë“œ ìš”ì•½
                </h2>
                <ol class="list-decimal list-outside space-y-3 pl-5 text-sm text-text-light/90">
                    <li class="font-bold">
                        ë¡œê·¸ì¸ í›„ <span class="text-accent">Download Now</span> ë²„íŠ¼ í´ë¦­
                    </li>
                    <li class="font-bold">
                        ì„¤ì¹˜ íŒŒì¼ ì‹¤í–‰ (<span class="text-yellow-400">ê´€ë¦¬ì ê¶Œí•œ</span> ê¶Œì¥)
                    </li>
                    <li class="font-bold">
                        ì„¤ì¹˜ ê²½ë¡œ ì§€ì • (SSD ê¶Œì¥)
                    </li>
                    <li class="font-bold">
                        ì„¤ì¹˜ ì™„ë£Œ í›„ ë°”íƒ•í™”ë©´ ë°”ë¡œê°€ê¸°ë¡œ ì‹¤í–‰
                    </li>
                </ol>
            </div>
        </section>


        <!-- 4. ìƒì„¸ ì •ë³´ ì„¹ì…˜ (Full Width) -->
        <section class="space-y-12">
            
            <!-- 4-1. ì „ì²´ íŒ¨ì¹˜ë…¸íŠ¸ ìƒì„¸ -->
            <section id="patchNotesDetail" class="p-8 bg-card-bg rounded-xl shadow-xl border border-text-muted/20">
                <h2 class="text-2xl font-bold mb-4 pb-2 border-b border-accent/50 text-accent">ì „ì²´ íŒ¨ì¹˜ ë…¸íŠ¸ (Full Patch Notes)</h2>
                <div class="space-y-6">
                    <article class="border-l-4 border-accent pl-4">
                        <h3 class="text-xl font-semibold mb-1">ë²„ì „ 1.0.4 - ì•ˆì •í™” ë° ê°œì„ </h3>
                        <p class="text-sm text-text-muted mb-2">2025ë…„ 2ì›” 5ì¼</p>
                        <ul class="list-disc list-inside space-y-1 ml-4 text-text-light/90">
                            <li>ì„œë²„ ì•ˆì •ì„±ì„ í–¥ìƒì‹œí‚¤ëŠ” íŒ¨ì¹˜ê°€ ì ìš©ë˜ì—ˆìŠµë‹ˆë‹¤.</li>
                            <li>ì¼ë¶€ ì§€ì—­ì—ì„œ ë°œìƒí•˜ë˜ í…ìŠ¤ì²˜ ë¡œë”© ì§€ì—° í˜„ìƒì„ ìˆ˜ì •í–ˆìŠµë‹ˆë‹¤.</li>
                            <li>ì‹ ê·œ íŠœí† ë¦¬ì–¼ í€˜ìŠ¤íŠ¸ 3ì¢…ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.</li>
                        </ul>
                    </article>
                    <article class="border-l-4 border-text-muted/50 pl-4 opacity-80">
                        <h3 class="text-xl font-semibold mb-1">ë²„ì „ 1.0.3 - ì½˜í…ì¸  ì—…ë°ì´íŠ¸</h3>
                        <p class="text-sm text-text-muted mb-2">2025ë…„ 1ì›” 15ì¼</p>
                        <ul class="list-disc list-inside space-y-1 ml-4 text-text-light/90">
                            <li>ì‹ ê·œ ì§€ì—­ 'í™©ê¸ˆì˜ ì‚¬ë§‰'ì´ ì˜¤í”ˆë˜ì—ˆìŠµë‹ˆë‹¤.</li>
                            <li>ë ˆë²¨ ì œí•œì´ 70ìœ¼ë¡œ í™•ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.</li>
                        </ul>
                    </article>
                </div>
            </section>
            
            <!-- 4-2. ìì£¼ ë¬»ëŠ” ì§ˆë¬¸ (FAQ) -->
            <section id="faq" class="p-8 bg-card-bg rounded-xl shadow-xl border border-text-muted/20">
                <h2 class="text-2xl font-bold mb-4 pb-2 border-b border-accent/50 text-accent">ìì£¼ ë¬»ëŠ” ì§ˆë¬¸ (FAQ)</h2>
                <div class="space-y-4">
                    <!-- FAQ Item 1 -->
                    <details class="group bg-body-bg rounded-lg shadow-md cursor-pointer">
                        <summary class="flex justify-between items-center p-4 font-semibold text-lg text-text-light hover:bg-body-bg/70 transition duration-150 rounded-lg">
                            ê²Œì„ ì‹¤í–‰ ì‹œ 'ì˜¤ë¥˜ ì½”ë“œ: 404'ê°€ ëœ¹ë‹ˆë‹¤. ì–´ë–»ê²Œ í•´ì•¼ í•˜ë‚˜ìš”?
                            <span class="group-open:rotate-180 transition duration-300">
                                <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"/></svg>
                            </span>
                        </summary>
                        <div class="px-4 pb-4 text-text-muted border-t border-card-bg/50">
                            <p>í•´ë‹¹ ì˜¤ë¥˜ëŠ” ì£¼ë¡œ í•„ìˆ˜ í”„ë¡œê·¸ë¨(DirectX, Visual C++ Redistributable ë“±)ì´ ëˆ„ë½ë˜ì—ˆì„ ë•Œ ë°œìƒí•©ë‹ˆë‹¤. ì„¤ì¹˜ í´ë” ë‚´ì˜ `Redist` í´ë”ì—ì„œ í•´ë‹¹ í”„ë¡œê·¸ë¨ì„ ì„¤ì¹˜í•˜ê±°ë‚˜, ë§ˆì´í¬ë¡œì†Œí”„íŠ¸ ê³µì‹ í™ˆí˜ì´ì§€ì—ì„œ ìµœì‹  ë²„ì „ì„ ë‹¤ìš´ë¡œë“œí•˜ì—¬ ì„¤ì¹˜í•´ ì£¼ì„¸ìš”.</p>
                        </div>
                    </details>

                    <!-- FAQ Item 2 -->
                    <details class="group bg-body-bg rounded-lg shadow-md cursor-pointer">
                        <summary class="flex justify-between items-center p-4 font-semibold text-lg text-text-light hover:bg-body-bg/70 transition duration-150 rounded-lg">
                            ë‹¤ìš´ë¡œë“œ ì†ë„ê°€ ë„ˆë¬´ ëŠë¦½ë‹ˆë‹¤. í•´ê²° ë°©ë²•ì´ ìˆë‚˜ìš”?
                            <span class="group-open:rotate-180 transition duration-300">
                                <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"/></svg>
                            </span>
                        </summary>
                        <div class="px-4 pb-4 text-text-muted border-t border-card-bg/50">
                            <p>ë„¤íŠ¸ì›Œí¬ í™˜ê²½ì„ í™•ì¸í•˜ê³ , ë‹¤ë¥¸ ëŒ€ìš©ëŸ‰ ë‹¤ìš´ë¡œë“œë¥¼ ì¼ì‹œ ì¤‘ì§€í•´ ì£¼ì„¸ìš”. ë˜í•œ, ë°©í™”ë²½ì´ë‚˜ ë°±ì‹  í”„ë¡œê·¸ë¨ì´ ê²Œì„ ì„¤ì¹˜ íŒŒì¼ì„ ì°¨ë‹¨í•˜ëŠ” ê²½ìš°ê°€ ìˆì„ ìˆ˜ ìˆìœ¼ë‹ˆ, ì¼ì‹œì ìœ¼ë¡œ ë¹„í™œì„±í™”í•œ í›„ ë‹¤ì‹œ ì‹œë„í•´ ë³´ì‹œê¸° ë°”ëë‹ˆë‹¤.</p>
                        </div>
                    </details>
                </div>
            </section>

        </section>

    </main>

    <!-- 5. Footer (í•˜ë‹¨ ì •ë³´) -->
    <footer class="mt-12 py-6 border-t border-card-bg bg-body-bg/50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center text-sm text-text-muted">
            <p>&copy; 2025 Game Portal. All Rights Reserved. | <a href="#" class="text-accent hover:underline">ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨</a></p>
        </div>
    </footer>
    
    <!-- ========== JAVASCRIPT START ========== -->
 <!-- ========== JAVASCRIPT START ========== -->
<!-- 1) Supabase SDKë¥¼ ê°€ì¥ ë¨¼ì € ë¶ˆëŸ¬ì˜¤ê¸° -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<!-- 2) Supabase í´ë¼ì´ì–¸íŠ¸ ìƒì„± (ì¤‘ë³µ ê¸ˆì§€) -->
<script>
const supabase = window.supabase.createClient(
  "https://sayfpvdocukafwetgsms.supabase.co",
  "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNheWZwdmRvY3VrYWZ3ZXRnc21zIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQwMjE1MTcsImV4cCI6MjA3OTU5NzUxN30.O6XxpBntdKb8mYIW3E94YeR6eaGtNxxzO3vs4u6t32g"
);
</script>

<!-- 3) ë©”ì¸ JS -->
<script>
let isLoggedIn = false;
const downloadArea = document.getElementById("downloadArea");
const statusMessage = document.getElementById("statusMessage");

/* ë‹¤ìš´ë¡œë“œ ë²„íŠ¼ ë Œë”ë§ */
function renderDownloadArea() {
  if (isLoggedIn) {
    downloadArea.innerHTML = `
      <button onclick="handleDownload()" class="
          w-full md:w-2/3 lg:w-1/2 mx-auto py-3 text-2xl font-extrabold rounded-xl shadow-xl 
          bg-accent hover:bg-accent-hover transform hover:scale-[1.02] 
          transition duration-300 ease-in-out active:scale-[0.98]
      ">
          Download Now (78 GB)
      </button>
      <p class="mt-3 text-text-muted text-sm">ë‹¤ìš´ë¡œë“œ ì†ë„ëŠ” ì‚¬ìš©ì ë„¤íŠ¸ì›Œí¬ í™˜ê²½ì— ë”°ë¼ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
    `;
  } else {
    downloadArea.innerHTML = `
      <p class="text-red-400 text-2xl font-bold mb-4">
          ë‹¤ìš´ë¡œë“œë¥¼ ì§„í–‰í•˜ë ¤ë©´ ë¨¼ì € ë¡œê·¸ì¸í•´ì•¼ í•©ë‹ˆë‹¤.
      </p>
      <a href="/login/login.html" class="
          w-full md:w-2/3 lg:w-1/2 mx-auto py-3 text-2xl font-extrabold rounded-xl shadow-xl 
          bg-red-600 hover:bg-red-700 transform hover:scale-[1.02]
          transition duration-300 ease-in-out active:scale-[0.98] block text-center
      ">
          ë¡œê·¸ì¸í•˜ê¸°
      </a>
    `;
  }
}

/* ë‹¤ìš´ë¡œë“œ ì‹¤í–‰ */
function handleDownload() {
  if (!isLoggedIn) {
    statusMessage.textContent = "ë¡œê·¸ì¸ ìƒíƒœê°€ ì•„ë‹™ë‹ˆë‹¤. ë‹¤ì‹œ ë¡œê·¸ì¸í•´ ì£¼ì„¸ìš”.";
    return;
  }

  statusMessage.innerHTML = 'ğŸš€ ë‹¤ìš´ë¡œë“œ ì‹œì‘ ì¤‘... <span class="text-accent">GameClient_1.0.4.exe</span>';

  setTimeout(() => {
    statusMessage.innerHTML = 'ğŸ‰ ë‹¤ìš´ë¡œë“œ ì™„ë£Œ! ì„¤ì¹˜ íŒŒì¼ì„ ì‹¤í–‰í•´ ì£¼ì„¸ìš”.';
  }, 5000);
}

/* Supabase ë¡œê·¸ì¸ ìƒíƒœ í™•ì¸ */
async function getUserSession() {
  try {
    const { data: { session } } = await supabase.auth.getSession();

    if (!session) return { isLoggedIn: false };

    const { data } = await supabase
      .from("profiles")
      .select("nickname")
      .eq("id", session.user.id)
      .single();

    return {
      isLoggedIn: true,
      nickname: data?.nickname || session.user.email
    };
  } catch (e) {
    console.error("ì„¸ì…˜ ì˜¤ë¥˜:", e);
    return { isLoggedIn: false };
  }
}

/* ë¡œê·¸ì•„ì›ƒ */
async function logout() {
  await supabase.auth.signOut();
  updateLoginArea();
}

/* ë¡œê·¸ì¸ ì˜ì—­ ì—…ë°ì´íŠ¸ */
async function updateLoginArea() {
  const userData = await getUserSession();
  const loginArea = document.getElementById("loginArea");

  isLoggedIn = userData.isLoggedIn;
  renderDownloadArea();

  if (userData.isLoggedIn) {
    loginArea.innerHTML = `
      <span class="nickname">ì•ˆë…•í•˜ì„¸ìš”, ${userData.nickname}ë‹˜</span>
      <button id="logoutBtn" class="login-btn">ë¡œê·¸ì•„ì›ƒ</button>
    `;

    document.getElementById("logoutBtn").addEventListener("click", logout);

  } else {
    loginArea.innerHTML = `
      <a href="/login/login.html" class="login-btn">ë¡œê·¸ì¸</a>
      <a href="/login/signup.html" class="login-btn">íšŒì›ê°€ì…</a>
    `;
  }
}

/* í˜ì´ì§€ ë¡œë“œ ì‹œ ì‹¤í–‰ */
document.addEventListener("DOMContentLoaded", () => {
  updateLoginArea();
});
</script>
</body>
</html>
